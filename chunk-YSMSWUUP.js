import{a as ke,b as Ee}from"./chunk-SFTA3QO4.js";import{b as Me,e as ve,g as Ce,k as we,m as _e}from"./chunk-W5IZHF5C.js";import{Ca as Y,D as c,Da as H,G as W,J as I,Kb as xe,L as S,La as le,M as K,O as $,Oa as ce,P as y,Pa as me,R as j,Ra as de,S as J,Sa as pe,Sb as ye,T as Z,Ta as E,U as h,Ua as ue,V as s,W as l,Wb as je,X as F,Xb as T,Ya as he,Za as ge,Zb as Oe,_b as Pe,ba as ee,ca as D,cc as Se,ea as M,fa as B,ga as te,h as U,ha as ne,ia as R,ja as C,k as N,ka as f,kc as De,la as b,mc as Be,o as P,oa as ie,p as Q,qa as w,r as G,ra as u,s as L,sa as O,t as d,ta as k,tb as fe,u as p,ub as be,va as oe,wa as ae,wb as v,xa as re,xb as _,ya as se,z as A}from"./chunk-DYLCP6CY.js";var Te=`
    .p-scrollpanel-content-container {
        overflow: hidden;
        width: 100%;
        height: 100%;
        position: relative;
        z-index: 1;
        float: left;
    }

    .p-scrollpanel-content {
        height: calc(100% + calc(2 * dt('scrollpanel.bar.size')));
        width: calc(100% + calc(2 * dt('scrollpanel.bar.size')));
        padding-inline: 0 calc(2 * dt('scrollpanel.bar.size'));
        padding-block: 0 calc(2 * dt('scrollpanel.bar.size'));
        position: relative;
        overflow: auto;
        box-sizing: border-box;
        scrollbar-width: none;
    }

    .p-scrollpanel-content::-webkit-scrollbar {
        display: none;
    }

    .p-scrollpanel-bar {
        position: relative;
        border-radius: dt('scrollpanel.bar.border.radius');
        z-index: 2;
        cursor: pointer;
        opacity: 0;
        outline-color: transparent;
        background: dt('scrollpanel.bar.background');
        border: 0 none;
        transition:
            outline-color dt('scrollpanel.transition.duration'),
            opacity dt('scrollpanel.transition.duration');
    }

    .p-scrollpanel-bar:focus-visible {
        box-shadow: dt('scrollpanel.bar.focus.ring.shadow');
        outline: dt('scrollpanel.barfocus.ring.width') dt('scrollpanel.bar.focus.ring.style') dt('scrollpanel.bar.focus.ring.color');
        outline-offset: dt('scrollpanel.barfocus.ring.offset');
    }

    .p-scrollpanel-bar-y {
        width: dt('scrollpanel.bar.size');
        inset-block-start: 0;
    }

    .p-scrollpanel-bar-x {
        height: dt('scrollpanel.bar.size');
        inset-block-end: 0;
    }

    .p-scrollpanel-hidden {
        visibility: hidden;
    }

    .p-scrollpanel:hover .p-scrollpanel-bar,
    .p-scrollpanel:active .p-scrollpanel-bar {
        opacity: 1;
    }

    .p-scrollpanel-grabbed {
        user-select: none;
    }
`;var Ve=["content"],Ye=["xBar"],He=["yBar"],qe=["*"];function Xe(o,i){o&1&&ne(0)}function Ue(o,i){o&1&&ee(0)}var Ne=`
    ${Te}

    .p-scrollpanel {
        display: block;
    }
`,Qe={root:"p-scrollpanel p-component",contentContainer:"p-scrollpanel-content-container",content:"p-scrollpanel-content",barX:"p-scrollpanel-bar p-scrollpanel-bar-x",barY:"p-scrollpanel-bar p-scrollpanel-bar-y"},ze=(()=>{class o extends Oe{name="scrollpanel";theme=Ne;classes=Qe;static \u0275fac=(()=>{let e;return function(n){return(e||(e=A(o)))(n||o)}})();static \u0275prov=P({token:o,factory:o.\u0275fac})}return o})();var Ge=(()=>{class o extends Pe{styleClass;step=5;contentViewChild;xBarViewChild;yBarViewChild;contentTemplate;templates;_contentTemplate;scrollYRatio;scrollXRatio;timeoutFrame=e=>setTimeout(e,0);initialized=!1;lastPageY;lastPageX;isXBarClicked=!1;isYBarClicked=!1;lastScrollLeft=0;lastScrollTop=0;orientation="vertical";timer;contentId;windowResizeListener;contentScrollListener;mouseEnterListener;xBarMouseDownListener;yBarMouseDownListener;documentMouseMoveListener;documentMouseUpListener;_componentStyle=L(ze);zone=L(W);ngOnInit(){super.ngOnInit(),this.contentId=ye("pn_id_")+"_content"}ngAfterViewInit(){super.ngAfterViewInit(),ue(this.platformId)&&this.zone.runOutsideAngular(()=>{this.moveBar(),this.moveBar=this.moveBar.bind(this),this.onXBarMouseDown=this.onXBarMouseDown.bind(this),this.onYBarMouseDown=this.onYBarMouseDown.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),this.windowResizeListener=this.renderer.listen(window,"resize",this.moveBar),this.contentScrollListener=this.renderer.listen(this.contentViewChild.nativeElement,"scroll",this.moveBar),this.mouseEnterListener=this.renderer.listen(this.contentViewChild.nativeElement,"mouseenter",this.moveBar),this.xBarMouseDownListener=this.renderer.listen(this.xBarViewChild.nativeElement,"mousedown",this.onXBarMouseDown),this.yBarMouseDownListener=this.renderer.listen(this.yBarViewChild.nativeElement,"mousedown",this.onYBarMouseDown),this.calculateContainerHeight(),this.initialized=!0})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this._contentTemplate=e.template;break;default:this._contentTemplate=e.template;break}})}calculateContainerHeight(){let e=this.el.nativeElement,t=this.contentViewChild.nativeElement,n=this.xBarViewChild.nativeElement,r=this.document.defaultView,a=r.getComputedStyle(e),m=r.getComputedStyle(n),g=xe(e)-parseInt(m.height,10);a["max-height"]!="none"&&g==0&&(t.offsetHeight+parseInt(m.height,10)>parseInt(a["max-height"],10)?e.style.height=a["max-height"]:e.style.height=t.offsetHeight+parseFloat(a.paddingTop)+parseFloat(a.paddingBottom)+parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth)+"px")}moveBar(){let e=this.el.nativeElement,t=this.contentViewChild.nativeElement,n=this.xBarViewChild.nativeElement,r=t.scrollWidth,a=t.clientWidth,m=(e.clientHeight-n.clientHeight)*-1;this.scrollXRatio=a/r;let g=this.yBarViewChild.nativeElement,q=t.scrollHeight,X=t.clientHeight,Fe=(e.clientWidth-g.clientWidth)*-1;this.scrollYRatio=X/q,this.requestAnimationFrame(()=>{if(this.scrollXRatio>=1)n.setAttribute("data-p-scrollpanel-hidden","true"),v(n,"p-scrollpanel-hidden");else{n.setAttribute("data-p-scrollpanel-hidden","false"),_(n,"p-scrollpanel-hidden");let x=Math.max(this.scrollXRatio*100,10),z=Math.abs(t.scrollLeft*(100-x)/(r-a));n.style.cssText="width:"+x+"%; inset-inline-start:"+z+"%;bottom:"+m+"px;"}if(this.scrollYRatio>=1)g.setAttribute("data-p-scrollpanel-hidden","true"),v(g,"p-scrollpanel-hidden");else{g.setAttribute("data-p-scrollpanel-hidden","false"),_(g,"p-scrollpanel-hidden");let x=Math.max(this.scrollYRatio*100,10),z=t.scrollTop*(100-x)/(q-X);g.style.cssText="height:"+x+"%; top: calc("+z+"% - "+n.clientHeight+"px); inset-inline-end:"+Fe+"px;"}}),this.cd.markForCheck()}onScroll(e){this.lastScrollLeft!==e.target.scrollLeft?(this.lastScrollLeft=e.target.scrollLeft,this.orientation="horizontal"):this.lastScrollTop!==e.target.scrollTop&&(this.lastScrollTop=e.target.scrollTop,this.orientation="vertical"),this.moveBar()}onKeyDown(e){if(this.orientation==="vertical")switch(e.code){case"ArrowDown":{this.setTimer("scrollTop",this.step),e.preventDefault();break}case"ArrowUp":{this.setTimer("scrollTop",this.step*-1),e.preventDefault();break}case"ArrowLeft":case"ArrowRight":{e.preventDefault();break}default:break}else if(this.orientation==="horizontal")switch(e.code){case"ArrowRight":{this.setTimer("scrollLeft",this.step),e.preventDefault();break}case"ArrowLeft":{this.setTimer("scrollLeft",this.step*-1),e.preventDefault();break}case"ArrowDown":case"ArrowUp":{e.preventDefault();break}default:break}}onKeyUp(){this.clearTimer()}repeat(e,t){this.contentViewChild?.nativeElement&&(this.contentViewChild.nativeElement[e]+=t),this.moveBar()}setTimer(e,t){this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,t)},40)}clearTimer(){this.timer&&clearTimeout(this.timer)}bindDocumentMouseListeners(){this.documentMouseMoveListener||(this.documentMouseMoveListener=e=>{this.onDocumentMouseMove(e)},this.document.addEventListener("mousemove",this.documentMouseMoveListener)),this.documentMouseUpListener||(this.documentMouseUpListener=e=>{this.onDocumentMouseUp(e)},this.document.addEventListener("mouseup",this.documentMouseUpListener))}unbindDocumentMouseListeners(){this.documentMouseMoveListener&&(this.document.removeEventListener("mousemove",this.documentMouseMoveListener),this.documentMouseMoveListener=null),this.documentMouseUpListener&&(document.removeEventListener("mouseup",this.documentMouseUpListener),this.documentMouseUpListener=null)}onYBarMouseDown(e){this.isYBarClicked=!0,this.yBarViewChild?.nativeElement?.focus(),this.lastPageY=e.pageY,this.yBarViewChild?.nativeElement?.setAttribute("data-p-scrollpanel-grabbed","true"),v(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","true"),v(this.document.body,"p-scrollpanel-grabbed"),this.bindDocumentMouseListeners(),e.preventDefault()}onXBarMouseDown(e){this.isXBarClicked=!0,this.xBarViewChild?.nativeElement?.focus(),this.lastPageX=e.pageX,this.xBarViewChild?.nativeElement?.setAttribute("data-p-scrollpanel-grabbed","false"),v(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","false"),v(this.document.body,"p-scrollpanel-grabbed"),this.bindDocumentMouseListeners(),e.preventDefault()}onDocumentMouseMove(e){this.isXBarClicked?this.onMouseMoveForXBar(e):this.isYBarClicked?this.onMouseMoveForYBar(e):(this.onMouseMoveForXBar(e),this.onMouseMoveForYBar(e))}onMouseMoveForXBar(e){let t=e.pageX-this.lastPageX;this.lastPageX=e.pageX,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollLeft+=t/this.scrollXRatio})}onMouseMoveForYBar(e){let t=e.pageY-this.lastPageY;this.lastPageY=e.pageY,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollTop+=t/this.scrollYRatio})}scrollTop(e){let t=this.contentViewChild.nativeElement.scrollHeight-this.contentViewChild.nativeElement.clientHeight;e=e>t?t:e>0?e:0,this.contentViewChild.nativeElement.scrollTop=e}onFocus(e){this.xBarViewChild?.nativeElement?.isSameNode(e.target)?this.orientation="horizontal":this.yBarViewChild?.nativeElement?.isSameNode(e.target)&&(this.orientation="vertical")}onBlur(){this.orientation==="horizontal"&&(this.orientation="vertical")}onDocumentMouseUp(e){this.yBarViewChild?.nativeElement?.setAttribute("data-p-scrollpanel-grabbed","false"),_(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.xBarViewChild?.nativeElement?.setAttribute("data-p-scrollpanel-grabbed","false"),_(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","false"),_(this.document.body,"p-scrollpanel-grabbed"),this.unbindDocumentMouseListeners(),this.isXBarClicked=!1,this.isYBarClicked=!1}requestAnimationFrame(e){(window.requestAnimationFrame||this.timeoutFrame)(e)}unbindListeners(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null),this.contentScrollListener&&(this.contentScrollListener(),this.contentScrollListener=null),this.mouseEnterListener&&(this.mouseEnterListener(),this.mouseEnterListener=null),this.xBarMouseDownListener&&(this.xBarMouseDownListener(),this.xBarMouseDownListener=null),this.yBarMouseDownListener&&(this.yBarMouseDownListener(),this.yBarMouseDownListener=null)}ngOnDestroy(){this.initialized&&this.unbindListeners()}refresh(){this.moveBar()}static \u0275fac=(()=>{let e;return function(n){return(e||(e=A(o)))(n||o)}})();static \u0275cmp=S({type:o,selectors:[["p-scroll-panel"],["p-scrollPanel"],["p-scrollpanel"]],contentQueries:function(t,n,r){if(t&1&&(R(r,Ve,4),R(r,je,4)),t&2){let a;f(a=b())&&(n.contentTemplate=a.first),f(a=b())&&(n.templates=a)}},viewQuery:function(t,n){if(t&1&&(C(Ve,5),C(Ye,5),C(He,5)),t&2){let r;f(r=b())&&(n.contentViewChild=r.first),f(r=b())&&(n.xBarViewChild=r.first),f(r=b())&&(n.yBarViewChild=r.first)}},hostAttrs:["data-pc-name","scrollpanel"],hostVars:2,hostBindings:function(t,n){t&2&&w(n.cn(n.cx("root"),n.styleClass))},inputs:{styleClass:"styleClass",step:[2,"step","step",le]},features:[se([ze]),$],ngContentSelectors:qe,decls:9,vars:20,consts:[["content",""],["xBar",""],["yBar",""],[3,"mouseenter","scroll"],[4,"ngTemplateOutlet"],["tabindex","0","role","scrollbar",3,"mousedown","keydown","keyup","focus","blur"],["tabindex","0","role","scrollbar",3,"mousedown","keydown","keyup","focus"]],template:function(t,n){if(t&1){let r=D();te(),s(0,"div")(1,"div",3,0),M("mouseenter",function(){return d(r),p(n.moveBar())})("scroll",function(m){return d(r),p(n.onScroll(m))}),J(3,Xe,1,0),y(4,Ue,1,0,"ng-container",4),l()(),s(5,"div",5,1),M("mousedown",function(m){return d(r),p(n.onXBarMouseDown(m))})("keydown",function(m){return d(r),p(n.onKeyDown(m))})("keyup",function(){return d(r),p(n.onKeyUp())})("focus",function(m){return d(r),p(n.onFocus(m))})("blur",function(){return d(r),p(n.onBlur())}),l(),s(7,"div",6,2),M("mousedown",function(m){return d(r),p(n.onYBarMouseDown(m))})("keydown",function(m){return d(r),p(n.onKeyDown(m))})("keyup",function(){return d(r),p(n.onKeyUp())})("focus",function(m){return d(r),p(n.onFocus(m))}),l()}t&2&&(w(n.cx("contentContainer")),j("data-pc-section","wrapper"),c(),w(n.cx("content")),j("data-pc-section","content"),c(2),Z(!n.contentTemplate&&!n._contentTemplate?3:-1),c(),h("ngTemplateOutlet",n.contentTemplate||n._contentTemplate),c(),w(n.cx("barX")),j("aria-orientation","horizontal")("aria-valuenow",n.lastScrollLeft)("data-pc-section","barx")("aria-controls",n.contentId),c(2),w(n.cx("barY")),j("aria-orientation","vertical")("aria-valuenow",n.lastScrollTop)("data-pc-section","bary")("aria-controls",n.contentId))},dependencies:[E,de,T],encapsulation:2,changeDetection:0})}return o})(),Ae=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=K({type:o});static \u0275inj=Q({imports:[Ge,T,T]})}return o})();var V=class o{constructor(i){this.http=i}apiUrl=`${fe.apiUrl}/chat`;obtenerMensajes(){return this.http.get(`${this.apiUrl}/mensajes`)}obtenerMensajesNuevos(i){let e=new he().set("despuesDe",i);return this.http.get(`${this.apiUrl}/mensajes/nuevos`,{params:e})}enviarMensaje(i){return this.http.post(`${this.apiUrl}/mensaje`,i)}enviarMensajeSistema(i){return this.http.post(`${this.apiUrl}/mensaje-sistema`,i)}static \u0275fac=function(e){return new(e||o)(G(ge))};static \u0275prov=P({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ke=["chatContainer"];function $e(o,i){o&1&&(s(0,"div",18),F(1,"i",19),s(2,"p"),u(3,"Cargando mensajes..."),l()())}function Je(o,i){if(o&1&&(s(0,"div",23)(1,"div",24)(2,"div",25)(3,"span",26),u(4),l(),s(5,"span",27),u(6,"Sistema"),l(),s(7,"span",28),u(8),Y(9,"date"),l()()(),s(10,"div",29),u(11),l()()),o&2){let e=B().$implicit;c(4),O((e.usuario==null?null:e.usuario.username)||"Sistema"),c(4),O(H(9,3,e.fechaHora,"HH:mm","-0300")),c(3),k(" ",e.contenido," ")}}function Ze(o,i){if(o&1&&(s(0,"div",30)(1,"div",31)(2,"div",25)(3,"span",32),u(4),l(),s(5,"span",28),u(6),Y(7,"date"),l()()(),s(8,"div",33),u(9),l()()),o&2){let e=B().$implicit;c(4),O(e.usuario==null?null:e.usuario.username),c(2),O(H(7,3,e.fechaHora,"HH:mm","-0300")),c(3),k(" ",e.contenido," ")}}function et(o,i){if(o&1&&(s(0,"div",20),y(1,Je,12,7,"div",21)(2,Ze,10,7,"div",22),l()),o&2){let e=i.$implicit,t=B();ie("mensaje-sistema",e.esDelSistema)("mensaje-propio",!e.esDelSistema&&(e.usuario==null?null:e.usuario.username)===t.usuarioActual)("mensaje-usuario",!e.esDelSistema&&(e.usuario==null?null:e.usuario.username)!==t.usuarioActual),c(),h("ngIf",e.esDelSistema),c(),h("ngIf",!e.esDelSistema)}}function tt(o,i){o&1&&(s(0,"div",34),F(1,"i",35),s(2,"p",36),u(3,"No hay mensajes a\xFAn"),l(),s(4,"p",37),u(5,"\xA1S\xE9 el primero en escribir algo!"),l()())}var Ie=class o{constructor(i,e){this.chatService=i;this.authService=e}chatContainer;usuarioActual;mensajes=[];nuevoMensaje="";cargando=!1;pollingSubscription;mensajesSistemaSubscription;MENSAJES_SISTEMA=[{contenido:"El fragor del yunke nos espera a todos...",nombreSistema:"Morel Vulliez"},{contenido:"\xA1Yo quiero Cobrar!!!!",nombreSistema:"Morel Vulliez"},{contenido:"\xA1Cordero!!!!!",nombreSistema:"Morel Vulliez"},{contenido:"Una vez tuve una batalla contra un puma durante 7 horas.",nombreSistema:"Morel Vulliez"},{contenido:"El fragor del yunke resuena en mi alma...",nombreSistema:"Morel Vulliez"},{contenido:"El caos observa en silencio, nadie se atreve a respirar.",nombreSistema:"MechaCore"},{contenido:"Hoy aprend\xED que los fantasmas no pagan alquiler.",nombreSistema:"MechaCore"},{contenido:"El sistema advierte: los errores se multiplican solos.",nombreSistema:"MechaCore"},{contenido:"Los archivos secretos fueron quemados, nadie vio nada.",nombreSistema:"MechaCore"},{contenido:"El fragor del yunke est\xE1 dentro de todos nosotros...",nombreSistema:"Morel Vulliez"},{contenido:"No hay salida, solo el ciclo eterno de mensajes absurdos.",nombreSistema:"DataForge"},{contenido:"Los servidores no perdonan ni a los valientes.",nombreSistema:"DataForge"},{contenido:"El fragor del yunke ilumina las almas perdidas...",nombreSistema:"Morel Vulliez"},{contenido:"Cuidado con los bugs que se disfrazan de amigos.",nombreSistema:"MechaCore"},{contenido:"\xA1Al ataque del caos, todos listos!",nombreSistema:"DataForge"},{contenido:"El fragor del yunke se escucha m\xE1s fuerte en la noche...",nombreSistema:"Morel Vulliez"},{contenido:"Nunca subestimes la fuerza de un servidor enojado.",nombreSistema:"MechaCore"},{contenido:"El purgatorio digital se r\xEDe de tus intentos.",nombreSistema:"DataForge"},{contenido:"El fragor del yunke marcar\xE1 tu destino, MorelVulliez.",nombreSistema:"Morel Vulliez"},{contenido:"Los logs recuerdan todo\u2026 incluso lo que no quer\xE9s.",nombreSistema:"MechaCore"}];ngOnInit(){this.cargarMensajes(),this.iniciarPolling(),this.iniciarMensajesSistema(),this.usuarioActual=this.authService.usuarioActualValue?.username}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe(),this.mensajesSistemaSubscription&&this.mensajesSistemaSubscription.unsubscribe()}cargarMensajes(){this.cargando=!0,this.chatService.obtenerMensajes().subscribe({next:i=>{this.mensajes=i,this.cargando=!1,setTimeout(()=>this.scrollToBottom(),100)},error:i=>{console.error("Error al cargar mensajes:",i),this.cargando=!1}})}iniciarPolling(){this.pollingSubscription=U(500).pipe(N(()=>{if(this.mensajes.length===0)return this.chatService.obtenerMensajes();let i=this.mensajes[this.mensajes.length-1];return this.chatService.obtenerMensajesNuevos(i.fechaHora)})).subscribe({next:i=>{this.mensajes.length===0?(this.mensajes=i,setTimeout(()=>this.scrollToBottom(),50)):i.length>0&&(this.mensajes.push(...i),setTimeout(()=>this.scrollToBottom(),50))},error:i=>{console.error("Error en polling:",i)}})}iniciarMensajesSistema(){let i=Math.random()<.5,e=i?900*1e3:300*1e3,t=i?900*1e3:300*1e3,n=e+Math.random()*t;setTimeout(()=>{this.enviarMensajeAleatorioDelSistema(),this.iniciarMensajesSistema()},n)}enviarMensajeAleatorioDelSistema(){let i=this.MENSAJES_SISTEMA[Math.floor(Math.random()*this.MENSAJES_SISTEMA.length)],e={contenido:i.contenido,nombreSistema:i.nombreSistema};this.chatService.enviarMensajeSistema(e).subscribe({next:()=>{console.log("Mensaje del sistema enviado")},error:t=>{console.error("Error al enviar mensaje del sistema:",t)}})}enviarMensaje(){if(!this.nuevoMensaje.trim())return;let i=this.authService.usuarioActualValue;if(!i)return;let e={contenido:this.nuevoMensaje.trim(),usuarioId:i.id};this.chatService.enviarMensaje(e).subscribe({next:()=>{this.nuevoMensaje=""},error:t=>{console.error("Error al enviar mensaje:",t)}})}scrollToBottom(){try{this.chatContainer&&(this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight)}catch(i){console.error("Error al hacer scroll:",i)}}onKeyPress(i){i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),this.enviarMensaje())}static \u0275fac=function(e){return new(e||o)(I(V),I(be))};static \u0275cmp=S({type:o,selectors:[["app-chat-global"]],viewQuery:function(e,t){if(e&1&&C(Ke,5),e&2){let n;f(n=b())&&(t.chatContainer=n.first)}},decls:23,vars:6,consts:[["chatContainer",""],[1,"chat-global-container"],[1,"chat-header"],[1,"header-content"],[1,"header-info"],[1,"header-title"],[1,"header-subtitle"],[1,"chat-messages"],["class","loading-container",4,"ngIf"],["class","mensaje-wrapper",3,"mensaje-sistema","mensaje-propio","mensaje-usuario",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"chat-input-container"],[1,"input-wrapper"],["placeholder","Escribe tu mensaje...","rows","1","maxlength","1000",1,"chat-input",3,"ngModelChange","keypress","ngModel"],["pButton","","type","button","icon","pi pi-send","pTooltip","Enviar mensaje","tooltipPosition","top",1,"p-button-rounded","p-button-primary","send-button",3,"click","disabled"],[1,"input-footer"],[1,"char-counter"],[1,"input-hint"],[1,"loading-container"],[1,"pi","pi-spin","pi-spinner","loading-icon"],[1,"mensaje-wrapper"],["class","mensaje sistema-mensaje",4,"ngIf"],["class","mensaje usuario-mensaje",4,"ngIf"],[1,"mensaje","sistema-mensaje"],[1,"mensaje-header-sistema"],[1,"mensaje-info"],[1,"sistema-nombre"],[1,"sistema-badge"],[1,"mensaje-hora"],[1,"mensaje-contenido-sistema"],[1,"mensaje","usuario-mensaje"],[1,"mensaje-header"],[1,"usuario-nombre"],[1,"mensaje-contenido"],[1,"empty-state"],[1,"pi","pi-comments","empty-icon"],[1,"empty-text"],[1,"empty-subtext"]],template:function(e,t){if(e&1){let n=D();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),u(5,"\u{1F4AC} Chat Global"),l(),s(6,"span",6),u(7,"Conversaci\xF3n en vivo con todos los usuarios"),l()()()(),s(8,"div",7,0),y(10,$e,4,0,"div",8)(11,et,3,8,"div",9)(12,tt,6,0,"div",10),l(),s(13,"div",11)(14,"div",12)(15,"textarea",13),re("ngModelChange",function(a){return d(n),ae(t.nuevoMensaje,a)||(t.nuevoMensaje=a),p(a)}),M("keypress",function(a){return d(n),p(t.onKeyPress(a))}),u(16,"      "),l(),s(17,"button",14),M("click",function(){return d(n),p(t.enviarMensaje())}),l()(),s(18,"div",15)(19,"span",16),u(20),l(),s(21,"span",17),u(22,"Presiona Enter para enviar"),l()()()()}e&2&&(c(10),h("ngIf",t.cargando&&t.mensajes.length===0),c(),h("ngForOf",t.mensajes),c(),h("ngIf",!t.cargando&&t.mensajes.length===0),c(3),oe("ngModel",t.nuevoMensaje),c(2),h("disabled",!t.nuevoMensaje.trim()),c(3),k("",t.nuevoMensaje.length,"/1000"))},dependencies:[_e,Me,ve,we,Ce,E,ce,me,Be,De,Ee,ke,Ae,Se,pe],styles:['.chat-global-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;background:linear-gradient(135deg,#050811,#0a0e1f,#050811);overflow:hidden;padding-bottom:env(safe-area-inset-bottom,0)}.chat-header[_ngcontent-%COMP%]{background:#0a0e1ff2;border-bottom:2px solid rgba(74,144,226,.3);padding:1.25rem 1.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 20px #00000080}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:1200px;margin:0 auto}.header-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#e0e0e0;margin:0;text-shadow:0 0 10px rgba(74,144,226,.3)}.header-subtitle[_ngcontent-%COMP%]{font-size:.85rem;color:#94a3b8;margin-top:.2rem}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem;display:flex;flex-direction:column;gap:.75rem;background:#050811;max-width:1200px;margin:0 auto;width:100%}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f172a4d;border-radius:10px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4a90e266;border-radius:10px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#4a90e299}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;padding:3rem;color:#94a3b8}.loading-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#4a90e2}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:#1e293b;margin-bottom:1rem}.empty-text[_ngcontent-%COMP%]{font-size:1.25rem;color:#64748b;font-weight:600;margin-bottom:.5rem}.empty-subtext[_ngcontent-%COMP%]{font-size:.95rem;color:#475569}.mensaje-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInMessage .3s ease-out;display:flex;width:100%}@keyframes _ngcontent-%COMP%_slideInMessage{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.mensaje[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;max-width:70%;word-wrap:break-word;display:inline-block;width:auto}.mensaje-usuario[_ngcontent-%COMP%]{justify-content:flex-start}.usuario-mensaje[_ngcontent-%COMP%]{background:#233055;border:1px solid rgba(74,144,226,.6);box-shadow:0 2px 10px #0006}.mensaje-propio[_ngcontent-%COMP%]{justify-content:flex-end}.mensaje-propio[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4a90e2,#5b7fd6);border:1px solid rgba(74,144,226,.6);box-shadow:0 2px 10px #4a90e24d}.mensaje-propio[_ngcontent-%COMP%]   .usuario-nombre[_ngcontent-%COMP%]{color:#fff}.mensaje-propio[_ngcontent-%COMP%]   .mensaje-hora[_ngcontent-%COMP%]{color:#fffc}.mensaje-propio[_ngcontent-%COMP%]   .mensaje-contenido[_ngcontent-%COMP%]{color:#fff}.mensaje-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.4rem;gap:.75rem}.mensaje-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;min-width:0}.usuario-nombre[_ngcontent-%COMP%]{font-weight:700;color:#fff;font-size:.88rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-shadow:0 1px 3px rgba(0,0,0,.3)}.mensaje-hora[_ngcontent-%COMP%]{font-size:.72rem;color:#94a3b8;white-space:nowrap;flex-shrink:0}.mensaje-contenido[_ngcontent-%COMP%]{color:#f5f5f5;line-height:1.5;font-size:.95rem;word-break:break-word;white-space:pre-wrap}.mensaje-sistema[_ngcontent-%COMP%]{justify-content:flex-start}.sistema-mensaje[_ngcontent-%COMP%]{background:#1e294b;border:2px solid rgba(56,189,248,.5);box-shadow:0 3px 12px #38bdf840;position:relative;max-width:85%}.sistema-mensaje[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border-radius:12px;padding:2px;background:linear-gradient(135deg,#38bdf866,#0ea5e966,#38bdf866);-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask-composite:exclude;opacity:.6;animation:_ngcontent-%COMP%_borderGlow 3s ease-in-out infinite;pointer-events:none}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{opacity:.6}50%{opacity:1}}.mensaje-header-sistema[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.4rem;gap:.75rem;position:relative;z-index:1}.mensaje-header-sistema[_ngcontent-%COMP%]   .mensaje-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;min-width:0}.sistema-badge[_ngcontent-%COMP%]{background:#fbbf2433;color:#fbbf24;font-size:.7rem;font-weight:700;padding:.2rem .5rem;border-radius:6px;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;border:1px solid rgba(251,191,36,.4)}.sistema-nombre[_ngcontent-%COMP%]{font-weight:700;color:#38bdf8;font-size:.88rem;text-shadow:0 0 8px rgba(56,189,248,.4);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mensaje-contenido-sistema[_ngcontent-%COMP%]{color:#e0e0e0;line-height:1.5;font-size:.95rem;font-weight:500;word-break:break-word;white-space:pre-wrap;position:relative;z-index:1}.chat-input-container[_ngcontent-%COMP%]{background:#0a0e1ffa;border-top:2px solid rgba(74,144,226,.3);padding:1.25rem 1.5rem 1rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 -4px 20px #00000080}.input-wrapper[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end;max-width:1200px;margin:0 auto}.chat-input[_ngcontent-%COMP%]{flex:1;background:#0f172ae6;border:2px solid rgba(74,144,226,.3);border-radius:16px;padding:1rem 1.25rem;color:#e0e0e0;font-size:1rem;font-family:inherit;resize:none;min-height:52px;max-height:120px;line-height:1.5;transition:all .3s ease}.chat-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a90e2;box-shadow:0 0 0 4px #4a90e233;background:#0f172a}.chat-input[_ngcontent-%COMP%]::placeholder{color:#64748b;font-size:.95rem}.send-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4a90e2,#7c3aed)!important;border:none!important;width:52px!important;height:52px!important;min-width:52px!important;padding:0!important;box-shadow:0 4px 15px #4a90e266;transition:all .3s ease;flex-shrink:0}.send-button[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:1.25rem}.send-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #4a90e299}.send-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0) scale(1)}.send-button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;background:#4a90e24d!important}.input-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:.75rem;max-width:1200px;margin-left:auto;margin-right:auto;padding:0 .25rem}.char-counter[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;font-weight:500}.input-hint[_ngcontent-%COMP%]{font-size:.8rem;color:#475569;font-style:italic}@media (max-width: 1024px){.chat-messages[_ngcontent-%COMP%]{padding:1.25rem}.mensaje[_ngcontent-%COMP%]{max-width:75%}.sistema-mensaje[_ngcontent-%COMP%]{max-width:90%}}@media (max-width: 768px){.chat-header[_ngcontent-%COMP%]{padding:1rem}.header-title[_ngcontent-%COMP%]{font-size:1.25rem}.header-subtitle[_ngcontent-%COMP%]{font-size:.75rem}.chat-messages[_ngcontent-%COMP%]{padding:1rem;gap:.65rem}.mensaje[_ngcontent-%COMP%]{max-width:80%;padding:.65rem .85rem}.sistema-mensaje[_ngcontent-%COMP%]{max-width:92%}.mensaje-header[_ngcontent-%COMP%], .mensaje-header-sistema[_ngcontent-%COMP%]{margin-bottom:.35rem;gap:.6rem}.mensaje-info[_ngcontent-%COMP%]{gap:.4rem}.usuario-nombre[_ngcontent-%COMP%], .sistema-nombre[_ngcontent-%COMP%]{font-size:.85rem}.mensaje-hora[_ngcontent-%COMP%]{font-size:.7rem}.mensaje-contenido[_ngcontent-%COMP%], .mensaje-contenido-sistema[_ngcontent-%COMP%]{font-size:.92rem}.chat-input-container[_ngcontent-%COMP%]{padding:1rem}.input-wrapper[_ngcontent-%COMP%]{gap:.75rem}.chat-input[_ngcontent-%COMP%]{font-size:.95rem;padding:.875rem 1rem;min-height:48px;border-radius:14px}.send-button[_ngcontent-%COMP%]{width:48px!important;height:48px!important;min-width:48px!important}.send-button[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:1.15rem}.input-hint[_ngcontent-%COMP%]{display:none}.char-counter[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 480px){.chat-header[_ngcontent-%COMP%]{padding:.875rem}.header-title[_ngcontent-%COMP%]{font-size:1.15rem}.header-subtitle[_ngcontent-%COMP%]{font-size:.7rem}.chat-messages[_ngcontent-%COMP%]{padding:.875rem;gap:.6rem}.mensaje[_ngcontent-%COMP%]{max-width:85%;padding:.6rem .8rem}.sistema-mensaje[_ngcontent-%COMP%]{max-width:95%}.mensaje-header[_ngcontent-%COMP%], .mensaje-header-sistema[_ngcontent-%COMP%]{margin-bottom:.3rem;gap:.5rem}.mensaje-info[_ngcontent-%COMP%]{gap:.35rem}.usuario-nombre[_ngcontent-%COMP%], .sistema-nombre[_ngcontent-%COMP%]{font-size:.83rem}.mensaje-hora[_ngcontent-%COMP%]{font-size:.68rem}.mensaje-contenido[_ngcontent-%COMP%], .mensaje-contenido-sistema[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.45}.chat-input-container[_ngcontent-%COMP%]{padding:.875rem}.input-wrapper[_ngcontent-%COMP%]{gap:.65rem}.chat-input[_ngcontent-%COMP%]{font-size:.92rem;padding:.8rem .95rem;min-height:46px;border-radius:12px}.chat-input[_ngcontent-%COMP%]::placeholder{font-size:.9rem}.send-button[_ngcontent-%COMP%]{width:46px!important;height:46px!important;min-width:46px!important}.send-button[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:1.1rem}.char-counter[_ngcontent-%COMP%]{font-size:.72rem}.input-footer[_ngcontent-%COMP%]{margin-top:.65rem}.empty-state[_ngcontent-%COMP%]{padding:3rem 1.5rem}.empty-icon[_ngcontent-%COMP%]{font-size:3rem}.empty-text[_ngcontent-%COMP%]{font-size:1.1rem}.empty-subtext[_ngcontent-%COMP%]{font-size:.88rem}}@media (max-width: 360px){.header-title[_ngcontent-%COMP%]{font-size:1.05rem}.mensaje[_ngcontent-%COMP%]{padding:.55rem .75rem;max-width:90%}.mensaje-contenido[_ngcontent-%COMP%], .mensaje-contenido-sistema[_ngcontent-%COMP%]{font-size:.88rem}.chat-input[_ngcontent-%COMP%]{font-size:.9rem;padding:.75rem .9rem;min-height:44px}.send-button[_ngcontent-%COMP%]{width:44px!important;height:44px!important;min-width:44px!important}.send-button[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:1.05rem}}']})};export{Ie as ChatGlobalComponent};
