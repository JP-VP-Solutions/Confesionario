<!-- Mensaje fijo sobre servidor gratuito -->
<div class="server-warning-container" *ngIf="showServerWarning">
  <p-message
    severity="info"
    styleClass="server-warning-message">
    <ng-template pTemplate>
      <div class="warning-content">
        <i class="pi pi-info-circle"></i>
        <span class="warning-text">
          ⏱️ <strong>Primera carga:</strong> Estamos usando hosting gratuito.
          Si la página tarda en cargar, espera 1-2 minutos mientras el servidor se activa.
          ¡Gracias por tu paciencia!
        </span>
        <button
          pButton
          type="button"
          icon="pi pi-times"
          class="p-button-text p-button-sm close-btn"
          (click)="cerrarMensajeServidor()">
        </button>
      </div>
    </ng-template>
  </p-message>
</div>

<!-- ===== BARRA SUPERIOR (solo cuando NO está logueado) ===== -->
<div class="top-brand-bar" *ngIf="!authService.estaAutenticado()">
  <div class="brand-container">
    <span class="brand-emoji">🎭</span>
    <span class="brand-name">Confiesa Anónimo</span>
    <span class="brand-divider">|</span>
    <span class="brand-location">📍 Córdoba, Argentina</span>
  </div>
</div>

<!-- Navbar (solo visible cuando está logueado y no en login/registro) -->
<nav class="navbar" *ngIf="showNavbar && authService.estaAutenticado()">
  <div class="navbar-container">
    <!-- Logo/Título -->
    <div class="navbar-brand" (click)="irAConfesiones()">
      <span class="brand-icon">🎭</span>
      <span class="brand-text">Confiesa Anónimo</span>
    </div>

    <!-- Menú de navegación -->
    <div class="navbar-menu">
      <!-- Botón de confesiones -->
      <button
        pButton
        type="button"
        label="Confesiones"
        icon="pi pi-comments"
        class="p-button-text"
        (click)="irAConfesiones()">
      </button>

      <!-- Info del usuario -->
      <div class="user-info">
        <span class="username">{{ authService.usuarioActualValue?.username }}</span>
        <button
          pButton
          type="button"
          icon="pi pi-sign-out"
          class="p-button-text p-button-danger"
          pTooltip="Cerrar sesión"
          tooltipPosition="bottom"
          (click)="logout()">
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Contenido principal -->
<main class="main-content" [class.with-navbar]="showNavbar && authService.estaAutenticado()">
  <router-outlet></router-outlet>
</main>

<!-- Footer (opcional) -->
<footer class="footer" *ngIf="showNavbar && authService.estaAutenticado()">
  <p>🎭 Confiesa Anónimo - Córdoba, Argentina © 2025</p>
</footer>
