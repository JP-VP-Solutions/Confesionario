<!-- Mensaje fijo sobre servidor gratuito -->
<div class="server-warning-container" *ngIf="showServerWarning">
  <p-message
    severity="info"
    styleClass="server-warning-message">
    <ng-template pTemplate>
      <div class="warning-content">
        <i class="pi pi-info-circle"></i>
        <span class="warning-text">
          憋 <strong>Primera carga:</strong> Estamos usando hosting gratuito.
          Si la p谩gina tarda en cargar, espera 1-2 minutos mientras el servidor se activa.
          隆Gracias por tu paciencia!
        </span>
        <button
          pButton
          type="button"
          icon="pi pi-times"
          class="p-button-text p-button-sm close-btn"
          (click)="cerrarMensajeServidor()">
        </button>
      </div>
    </ng-template>
  </p-message>
</div>

<!-- Navbar (solo visible cuando est谩 logueado y no en login/registro) -->
<nav class="navbar" *ngIf="showNavbar && authService.estaAutenticado()">
  <div class="navbar-container">
    <!-- Logo/T铆tulo -->
    <div class="navbar-brand" (click)="irAConfesiones()">
      <span class="brand-icon"></span>
      <span class="brand-text">Confiesa An贸nimo</span>
    </div>

    <!-- Men煤 de navegaci贸n -->
    <div class="navbar-menu">
      <!-- Bot贸n de confesiones -->
      <button
        pButton
        type="button"
        label="Confesiones"
        icon="pi pi-comments"
        class="p-button-text"
        (click)="irAConfesiones()">
      </button>

      <!-- Bot贸n de admin (solo si es admin) -->
      <button
        *ngIf="authService.esAdmin()"
        pButton
        type="button"
        label="Admin"
        icon="pi pi-shield"
        class="p-button-text p-button-warning"
        (click)="irAAdmin()">
      </button>

      <!-- Info del usuario -->
      <div class="user-info">
        <span class="username">{{ authService.usuarioActualValue?.username }}</span>
        <button
          pButton
          type="button"
          icon="pi pi-sign-out"
          class="p-button-text p-button-danger"
          pTooltip="Cerrar sesi贸n"
          tooltipPosition="bottom"
          (click)="logout()">
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Contenido principal -->
<main class="main-content" [class.with-navbar]="showNavbar && authService.estaAutenticado()">
  <router-outlet></router-outlet>
</main>

<!-- Footer (opcional) -->
<footer class="footer" *ngIf="showNavbar && authService.estaAutenticado()">
  <p> Confiesa An贸nimo - Barrio Alberdi - C贸rdoba 漏 2025</p>
</footer>
