<!-- Mensaje fijo sobre servidor gratuito -->
<div class="server-warning-container" *ngIf="showServerWarning">
  <p-message
    severity="info"
    styleClass="server-warning-message">
    <ng-template pTemplate>
      <div class="warning-content">
        <i class="pi pi-info-circle"></i>
        <span class="warning-text">
          â±ï¸ <strong>Primera carga:</strong> Estamos usando hosting gratuito.
          Si la pÃ¡gina tarda en cargar, espera 1-2 minutos mientras el servidor se activa.
          Â¡Gracias por tu paciencia!
        </span>
        <button
          pButton
          type="button"
          icon="pi pi-times"
          class="p-button-text p-button-sm close-btn"
          (click)="cerrarMensajeServidor()">
        </button>
      </div>
    </ng-template>
  </p-message>
</div>

<!-- ===== BARRA SUPERIOR (solo cuando NO estÃ¡ logueado) ===== -->
<div class="top-brand-bar" *ngIf="!authService.estaAutenticado()">
  <div class="brand-container">
    <span class="brand-emoji">ğŸ­</span>
    <span class="brand-name">Confiesa AnÃ³nimo</span>
    <span class="brand-divider">|</span>
    <span class="brand-location">ğŸ“ CÃ³rdoba, Argentina</span>
  </div>
</div>

<!-- Navbar (solo visible cuando estÃ¡ logueado y no en login/registro) -->
<nav class="navbar" *ngIf="showNavbar && authService.estaAutenticado()">
  <div class="navbar-container">
    <!-- Logo/TÃ­tulo -->
    <div class="navbar-brand">
      <span class="brand-icon">ğŸ­</span>
      <span class="brand-text">Confiesa AnÃ³nimo</span>
    </div>

    <!-- MenÃº de navegaciÃ³n -->
    <div class="navbar-menu">
      <!-- Info del usuario -->
      <div class="user-info">
        <span class="navbar-username">{{ authService.usuarioActualValue?.username | slice:0:12 }}{{ authService.usuarioActualValue!.username.length > 12 ? 'â€¦' : '' }}</span>
        <button
          pButton
          type="button"
          icon="pi pi-sign-out"
          class="p-button-text p-button-danger"
          pTooltip="Cerrar sesiÃ³n"
          tooltipPosition="bottom"
          (click)="logout()">
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Contenido principal -->
<main class="main-content" [class.with-navbar]="showNavbar && authService.estaAutenticado()">
  <router-outlet></router-outlet>
</main>

<!-- Footer (opcional) -->
<footer class="footer" *ngIf="showNavbar && authService.estaAutenticado()">
  <p>ğŸ­ Confiesa AnÃ³nimo - CÃ³rdoba, Argentina Â© 2025</p>
</footer>
